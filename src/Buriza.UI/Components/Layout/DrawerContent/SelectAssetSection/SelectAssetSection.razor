@using Buriza.UI.Components.Common
@using Buriza.UI.Components.Controls
@using Buriza.UI.Resources
@using Buriza.UI.Data
@using Buriza.Data.Models.Common
@using Buriza.Data.Models.Enums

@namespace Buriza.UI.Components.Layout

<div class="relative !gap-6 !pb-8 flex flex-col items-center !px-4">
    <div class="w-full">
        <BurizaTabs
            Class="!w-full [&_.mud-tab-active]:!bg-transparent !text-[var(--mud-palette-text-primary)] [&_.mud-tooltip-root]:!w-full [&_.mud-tabs-tabbar-wrapper]:!gap-2 [&_.mud-tabs-tabbar-wrapper]:!max-w-full [&_.mud-tabs-tabbar-wrapper]:!w-full"
            @bind-ActivePanelIndex="AppStateService.SelectedAssetTypeIndex"
        >
            <MudTabPanel 
                Text="Token" 
                Icon="@BurizaIcons.TokenSymbolIcon"
                Class="w-full bg-[var(--mud-palette-dark)]"
                Style="border-radius: 30px 10px 10px 30px"
            />
            <MudTabPanel 
                Text="NFT" 
                Icon="@BurizaIcons.NftSymbolIcon"
                Class="w-full bg-[var(--mud-palette-dark)]"
                Style="border-radius: 10px 30px 30px 10px"
            />
        </BurizaTabs>
    </div>
    <div class="!space-y-2 h-full max-h-[calc(100vh-208px)] w-full overflow-y-auto !rounded-[12px]">
        @if(AppStateService.SelectedAssetType == AssetType.Token)
        {
            @foreach (TokenAsset asset in TokenAssets)
            {
                <BurizaAssetCard
                    AssetIcon="@asset.AssetIcon"
                    AssetName="@asset.AssetName"
                    PricePercentage="@asset.PricePercentage"
                    AssetAmount="@asset.AssetAmount"
                    UsdConversion="@asset.UsdConversion"
                    Class="md:[&_.asset-icon]:!w-[44px] md:[&_.asset-icon]:!h-[44px]"
                />
            }
        }
        else
        {
            @foreach (NftAsset nft in NftAssets)
            {
                <BurizaAssetCard
                    AssetIcon="@nft.AssetIcon"
                    AssetName="@nft.AssetName"
                    PricePercentage="@nft.PricePercentage"
                    AssetAmount="@nft.AssetAmount"
                    UsdConversion="@nft.UsdConversion"
                    AssetType="AssetType.NFT"
                    CollectionName="@nft.CollectionName"
                    Class="md:[&_.asset-icon]:!w-[44px] md:[&_.asset-icon]:!h-[44px]"
                />
            }
        }
    </div>
</div>