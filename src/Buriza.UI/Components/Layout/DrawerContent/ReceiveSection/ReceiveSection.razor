@using Buriza.Data.Models.Common
@using Buriza.UI.Components.Common
@using Buriza.UI.Components.Controls
@using Buriza.UI.Resources
@using Buriza.Data.Models.Enums

@namespace Buriza.UI.Components.Layout

<div class="!mt-[10px] relative h-full !pb-8 flex flex-col justify-between items-center">
    @if(!IsAdvancedMode)
    {
        <div />
            <div class="w-full !px-4">
                <div class="relative !mb-11">
                    <MudImage   
                        Alt="glimmer" 
                        Src="@Misc.DiamondClusterOrange"
                        Class="!absolute bottom-[-45px] left-3" 
                    />
                    <MudImage 
                        Alt="QR Code" 
                        Src="@Misc.BurizaQrCode" 
                        Class="!mx-auto !h-[265px]" 
                    />
                    <MudImage 
                        Alt="glimmer" 
                        Src="@Misc.DiamondClusterPurple" 
                        Class="!absolute top-[-67px] right-[-14px]" 
                    />

                </div>
                <div class="!px-4">
                    <MudText 
                        Class="!text-[22px] !font-semibold !text-[var(--mud-palette-text-primary)]" 
                        Align="Align.Center"
                    >
                        @SelectedAccount.Name
                    </MudText>
                    <MudText 
                        Class="break-words !text-[var(--mud-palette-text-primary)] !mt-2" 
                        Align="Align.Center"
                    >
                        <span class="font-bold"
                            Align="Align.Center"
                        >
                            @SelectedAccount.Start
                        </span>@SelectedAccount.Middle
                        <span
                            class="font-bold"
                        >
                            @SelectedAccount.End
                        </span>
                    </MudText>
                </div>
            </div>
            <div class="!px-4 flex justify-between items-end gap-x-2 w-full">
                <BurizaButton Variant="Variant.Filled" Color="Color.Primary" Class="w-full">
                    Share QR Code
                </BurizaButton>
                <MudIconButton Icon="@BurizaIcons.CopySymbolIcon" Variant="Variant.Filled"
                    Class="!rounded-full !p-2 [&_.mud-icon-root]:!text-[var(--mud-palette-secondary-text)] !bg-[var(--mud-palette-secondary-lighten)]">
                </MudIconButton>
            </div>
    }
    else
    {
        <div class="w-full flex flex-col !gap-5 items-center">
            <div class="!px-4 w-full">
                <div
                    class="w-full !bg-[var(--mud-palette-dark-darken)] flex items-center justify-between !py-4 !px-4 shadow-[var(--mud-elevation-2)] !rounded-[12px]">
                    <div class="flex items-center !gap-3">
                        <div class="relative">
                            <div>
                                <MudImage Alt="Avatar" Src="@Misc.Avatar"
                                    Class="!w-[46px] aspect-square !rounded-full" />
                            </div>
                        </div>
                        <div>
                            <MudText Class="!font-medium !text-[var(--mud-palette-text-primary)]">
                                WalletName1
                            </MudText>
                        </div>
                    </div>
                    <div>
                        <MudIconButton Icon="@BurizaIcons.ChevronLeftIcon" Class="!p-0" />
                    </div>
                </div>
            </div>

            <div class="flex flex-col gap-y-3 px-4 w-full h-[calc(100vh-237px)] overflow-y-auto">
                @foreach (ReceiveAccount account in Accounts)
                {

                    <MudCard
                        Class="flex flex-col gap-y-3 !p-4 !bg-[var(--mud-palette-background-gray)] rounded-xl border border-solid border-[var(--mud-palette-table-lines)] !cursor-pointer shadow-[var(--mud-elevation-2)]"
                        Elevation="0"
                        @onclick="() => OnAccountCardClicked(account.Index)"
                    >
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <MudImage Alt="Avatar" Src="@account.AvatarUrl"
                                    Class="!w-9 aspect-square !rounded-full !mr-2" />
                                <MudText Class="!font-semibold">@account.Name</MudText>
                            </div>
                            <div>
                                <MudIconButton Icon="@BurizaIcons.QrScannerIcon"
                                    Class="self-start !p-0 [&_.mud-icon-root]:!text-[var(--mud-palette-text-primary)]" />
                            </div>
                        </div>
                        <div>
                            <MudText Align="Align.Left" Class="!mr-[76px] !text-xs break-all overflow-wrap-anywhere">
                                <span class="font-bold">@account.Start</span><span class="break-all">@account.Middle</span><span
                                    class="font-bold">@account.End</span>
                            </MudText>
                        </div>
                        <div class="flex justify-between items-center">
                            <MudText Align="Align.Left" Class="!font-semibold !text-xs">@account.DerivationPath
                            </MudText>
                            <MudChip T="object"
                                Class="@(GetChipColor(account.Status) + " max-h-5 !text-[var(--mud-palette-tertiary)]")">
                                <MudIcon Icon="@GetChipIcon(account.Status)" Class="!w-3 !h-3 !mr-1" />
                                @switch (account.Status)
                                {
                                    case AccountStatusType.Used:
                                        <MudText Class="!text-[8px] !font-semibold">Used</MudText>
                                        break;
                                    case AccountStatusType.Unused:
                                        <MudText Class="!text-[8px] !font-semibold">Unused</MudText>
                                        break;
                                    case AccountStatusType.Balance:
                                        <MudText Class="!text-[8px] !font-semibold">@account.Balance.ToString("")</MudText>
                                        break;
                                }
                            </MudChip>
                        </div>
                    </MudCard>
                }
            </div>
        </div>
    }
</div>